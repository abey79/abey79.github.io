<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>TIL: running Textual on a framebuffer terminal emulator for Linux | bylr.info</title>
<meta name=keywords content="textual,til,raspberrypi">
<meta name=description content="My successful (yet probably vain) attempt at running Textual (a modern TUI framework) on a Raspberry Pi without X11 by using fbpad (a framebuffer terminal emulator for Linux).">
<meta name=author content>
<link rel=canonical href=https://bylr.info/articles/2022/10/29/til-textual-fb-term/>
<link crossorigin=anonymous href=/assets/css/stylesheet.9d062edb236f2ea4fdd741bf42f29e31efa12bcd7050f0de6428570bde275986.css integrity="sha256-nQYu2yNvLqT910G/QvKeMe+hK81wUPDeZChXC94nWYY=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://bylr.info/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://bylr.info/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://bylr.info/favicon-32x32.png>
<link rel=apple-touch-icon href=https://bylr.info/apple-touch-icon.png>
<link rel=mask-icon href=https://bylr.info/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
</noscript><script defer data-domain=bylr.info data-api=https://sta.abeyeler.workers.dev/sta/event src=https://sta.abeyeler.workers.dev/sta/script.js></script><meta property="og:title" content="TIL: running Textual on a framebuffer terminal emulator for Linux">
<meta property="og:description" content="My successful (yet probably vain) attempt at running Textual (a modern TUI framework) on a Raspberry Pi without X11 by using fbpad (a framebuffer terminal emulator for Linux).">
<meta property="og:type" content="article">
<meta property="og:url" content="https://bylr.info/articles/2022/10/29/til-textual-fb-term/">
<meta property="og:image" content="https://bylr.info/til-textual-fb-term/banner.jpg"><meta property="article:section" content="articles">
<meta property="article:published_time" content="2022-10-29T00:00:00+00:00">
<meta property="article:modified_time" content="2022-10-29T00:00:00+00:00"><meta property="og:site_name" content="Antoine Beyeler">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://bylr.info/til-textual-fb-term/banner.jpg">
<meta name=twitter:title content="TIL: running Textual on a framebuffer terminal emulator for Linux">
<meta name=twitter:description content="My successful (yet probably vain) attempt at running Textual (a modern TUI framework) on a Raspberry Pi without X11 by using fbpad (a framebuffer terminal emulator for Linux).">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Articles","item":"https://bylr.info/articles/"},{"@type":"ListItem","position":2,"name":"TIL: running Textual on a framebuffer terminal emulator for Linux","item":"https://bylr.info/articles/2022/10/29/til-textual-fb-term/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"TIL: running Textual on a framebuffer terminal emulator for Linux","name":"TIL: running Textual on a framebuffer terminal emulator for Linux","description":"My successful (yet probably vain) attempt at running Textual (a modern TUI framework) on a Raspberry Pi without X11 by using fbpad (a framebuffer terminal emulator for Linux).","keywords":["textual","til","raspberrypi"],"articleBody":"Excuse me‚Ä¶ Running a what on what terminal what? ü§î\nSo, here is the thing. A Raspberry PI paired with a touch-screen can serve as a touch-based, human-machine interface (HMI) for things like DIY projects, robots, and whatnot. For example, this is how I control my Axidraw plotter. The current implementation of my HMI software ‚Äì named taxi ‚Äì uses Kivy. Here it is in action:\n   This requires a full X11 and desktop environment (e.g. LXDE, used by default by Raspberry Pi OS), which is heavy (the full Raspberry Pi OS doesn‚Äôt fit on a 4GB memory card) and harder to turn into kiosk mode.\nEver since I first learned of the modern TUI framework Textual, I‚Äôve been thinking of using it as a lightweight, kiosk-mode, touch-based HMI with minimal requirements for the underlying OS. All it needs is a terminal!\nMy first idea was to simply use the Linux console, which is the terminal-y thing you see at boot, and can use to login if you don‚Äôt have a X11/desktop environment. Unfortunately, due to severe limitations in the number of glyphs it can handle (or of my comprehension of it), the results were‚Ä¶ underwhelming:\nThis screenshot was made with a Debian VM running in Parallels Desktop, but the it‚Äôs the same for a Raspberry Pi and a physical screen.\nThen I learned about framebuffer terminal emulators. The Linux framebuffer is a subsystem to display on-screen graphics over the system console without relying on a X11 server. Framebuffer terminal emulators basically emulate a terminal and ‚Äúdraw‚Äù it to the screen using the Linux framebuffer. As it turns out, they are extremely niche pieces of software, so it felt like a trip to the past to get them to run! üòÖ\nFor a bunch of reasons discussed below, this is most likely a dead-end in my quest. Still, I learned a few things and I surely won‚Äôt remember any of it unless it‚Äôs writen down.\nThe plan I found a bunch of framebuffer terminal emulators, including fbcon, fbterm, bterm, yaft, and fbpad. I tried some of them (not all), and fbpad, by Ali Gholami Rudi, was the first to yield decent results, so it‚Äôll be the focus of this article.\nHere is an overview of the steps:\n Download a suitable TTF font. Download and build ft2tf, and use it to convert the font to fbpad‚Äôs custom format. Download, configure, and build fbpad. Download Textual and run it in fbpad.  I‚Äôll assume a Debian type of OS, like Raspberry Pi OS, Ubuntu, or a Debian distro.\nPreparing the font First, let‚Äôs download a suitable monospace font. I chose to use Fira Code.\ncd ~ wget -O fira.zip \"https://fonts.google.com/download?family=Fira%20Code\" unzip fira.zip -d fira Then, download and build ft2tf, a font conversion tool by the same author as fbpad:\ncd ~ apt-get install libfreetype-dev wget http://litcave.rudi.ir/ft2tf-0.9.tar.gz tar xzf ft2tf-0.9.tar.gz cd ft2tf-0.9 make Now we‚Äôre ready to convert the font:\n./ft2tf -h18 -w10 ~/fira/static/FiraCode-Regular.ttf:6  ~/fira/fira.tf The -h and -w options specify the final glyph size in the terminal, which in turn determines the column and row count based on your screen resolution. The :6 part after the font path specifies the size at which the TTF font is scaled before conversion. I found these values to work decently well for my Raspberry Pi‚Äôs screen (a Waveshare 7\" HDMI LCD), but YMMV.\nConfigure and build fbpad First, download fbpad:\ncd ~ git clone https://github.com/aligrudi/fbpad cd fbpad Then, edit conf.h and change these two options:\n// ...  #define TERM \"xterm-256color\" #define FR \"/home/USERNAME/fira/fira.tf\"  // ... Obviously, use your actual username. You can leave the rest unchanged.\nFinally, compile fbpad:\nmake Running Textual in fbpad First, grab a copy of Textual (here from source, using Poetry ‚Äì installing in a venv should work as well):\ncd ~ git clone https://github.com/Textualize/textual.git cd textual poetry install We‚Äôre finally ready to roll! Here is Textual color reference:\nTERMCOLOR=truecolor ~/fbpad/fbpad poetry run textual colors Note that TERMCOLOR=truecolor is required to have 256 colors, but it doesn‚Äôt actually enable 24bit true color mode, which fbpad does not support.\nHere is how it looks like in the Debian VM:\nThe Textual demo can ben run with the following command:\nTERMCOLOR=truecolor ~/fbpad/fbpad poetry run python -m textual Finally, here is a video of how it runs on the actual Raspberry Pi:\n   Final words As I mentioned before, this approach has many limitations:\n It‚Äôs obviously cumbersome to setup ‚Äì compiled configuration file anyone?? Hardly any of the framebuffer terminal emulators are active and well maintained projects. None of them have mouse support ‚Äì let alone handle a touch-screen1. The performance is bad, without an ounce of hardware acceleration.  For my purposes, I‚Äôll likely move on to a bare-bone X11 setup without windows manager nor Desktop environment (basically startx + fullscreen xterm), since it addresses most of these limitations. Still, it was a fun niche to dig into! ü§ì\n  Extending Textual to support a touch-screen on Linux can be done with python-evdev¬†‚Ü©Ô∏é\n   ","wordCount":"826","inLanguage":"en","image":"https://bylr.info/til-textual-fb-term/banner.jpg","datePublished":"2022-10-29T00:00:00Z","dateModified":"2022-10-29T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://bylr.info/articles/2022/10/29/til-textual-fb-term/"},"publisher":{"@type":"Organization","name":"bylr.info","logo":{"@type":"ImageObject","url":"https://bylr.info/favicon.ico"}}}</script>
</head>
<body id=top>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://bylr.info/ accesskey=h title="bylr.info (Alt + H)">bylr.info</a>
<div class=logo-switches>
</div>
</div>
<ul id=menu>
<li>
<a href=https://bylr.info/about/ title=about>
<span>about</span>
</a>
</li>
<li>
<a href=https://bylr.info/archives title=archives>
<span>archives</span>
</a>
</li>
<li>
<a href=https://bylr.info/tags/ title=tags>
<span>tags</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<h1 class=post-title>
TIL: running Textual on a framebuffer terminal emulator for Linux
</h1>
<div class=post-meta><span title="2022-10-29 00:00:00 +0000 UTC">October 29, 2022</span>&nbsp;|&nbsp;<a href=https://github.com/abey79/abey79.github.io/blob/main/content/articles/til-textual-fb-term.md rel="noopener noreferrer" target=_blank>Suggest Changes</a>
</div>
</header>
<figure class=entry-cover><img loading=lazy src=https://bylr.info/til-textual-fb-term/banner.jpg alt="close-up of a small Raspberry Pi screen showing the Textual demo">
</figure>
<div class=post-content><p>Excuse me&mldr; Running a what on what terminal what? ü§î</p>
<p>So, here is the thing. A <a href=https://www.raspberrypi.org>Raspberry PI</a> paired with a touch-screen can serve as a touch-based, human-machine interface (HMI) for things like DIY projects, robots, and whatnot. For example, this is how I control my <a href=https://axidraw.com>Axidraw</a> plotter. The current implementation of my HMI software ‚Äì named <a href=https://github.com/plottertools/taxi>taxi</a> ‚Äì uses <a href=https://kivy.org>Kivy</a>. Here it is in action:</p>
<div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden>
<iframe src=https://www.youtube.com/embed/kELtKbjg-fo style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="Mobile plotting station"></iframe>
</div>
<br>
<p>This requires a full X11 and desktop environment (e.g. <a href=http://www.lxde.org>LXDE</a>, used by default by <a href=https://www.raspberrypi.com/software/>Raspberry Pi OS</a>), which is heavy (the full Raspberry Pi OS doesn&rsquo;t fit on a 4GB memory card) and harder to turn into kiosk mode.</p>
<p>Ever since I first learned of the modern <a href=https://en.wikipedia.org/wiki/Text-based_user_interface>TUI</a> framework <a href=https://textual.textualize.io>Textual</a>, I&rsquo;ve been thinking of using it as a lightweight, kiosk-mode, touch-based HMI with minimal requirements for the underlying OS. All it needs is a terminal!</p>
<p>My first idea was to simply use the <a href=https://en.wikipedia.org/wiki/Linux_console>Linux console</a>, which is the terminal-y thing you see at boot, and can use to login if you don&rsquo;t have a X11/desktop environment. Unfortunately, due to severe limitations in the number of glyphs it can handle (or of my comprehension of it), the results were&mldr; underwhelming:</p>
<img src=/til-textual-fb-term/console-parallels.png alt="`python -m textual` running with the Linux console on a Debian VM" width=80% style=display:block;margin-left:auto;margin-right:auto>
<p>This screenshot was made with a <a href=https://www.debian.org>Debian</a> VM running in <a href=https://www.parallels.com>Parallels Desktop</a>, but the it&rsquo;s the same for a Raspberry Pi and a physical screen.</p>
<p>Then I learned about framebuffer terminal emulators. The <a href=https://en.wikipedia.org/wiki/Linux_framebuffer>Linux framebuffer</a> is a subsystem to display on-screen graphics over the system console without relying on a X11 server. Framebuffer terminal emulators basically emulate a terminal and &ldquo;draw&rdquo; it to the screen using the Linux framebuffer. As it turns out, they are extremely niche pieces of software, so it felt like a trip to the past to get them to run! üòÖ</p>
<p>For a bunch of reasons discussed below, this is most likely a dead-end in my quest. Still, I learned a few things and I surely won&rsquo;t remember any of it unless it&rsquo;s writen down.</p>
<h2 id=the-plan>The plan<a hidden class=anchor aria-hidden=true href=#the-plan>#</a></h2>
<p>I found a bunch of framebuffer terminal emulators, including <a href=https://docs.kernel.org/fb/fbcon.html>fbcon</a>, <a href=https://github.com/sfzhi/fbterm>fbterm</a>, <a href=https://github.com/bleenco/bterm>bterm</a>, <a href=https://github.com/uobikiemukot/yaft>yaft</a>, and <a href=https://github.com/aligrudi/fbpad>fbpad</a>. I tried some of them (not all), and fbpad, by <a href=http://litcave.rudi.ir>Ali Gholami Rudi</a>, was the first to yield decent results, so it&rsquo;ll be the focus of this article.</p>
<p>Here is an overview of the steps:</p>
<ol>
<li>Download a suitable TTF font.</li>
<li>Download and build ft2tf, and use it to convert the font to fbpad&rsquo;s custom format.</li>
<li>Download, configure, and build fbpad.</li>
<li>Download Textual and run it in fbpad.</li>
</ol>
<p>I&rsquo;ll assume a Debian type of OS, like Raspberry Pi OS, Ubuntu, or a Debian distro.</p>
<h2 id=preparing-the-font>Preparing the font<a hidden class=anchor aria-hidden=true href=#preparing-the-font>#</a></h2>
<p>First, let&rsquo;s download a suitable monospace font. I chose to use <a href=https://fonts.google.com/specimen/Fira+Code>Fira Code</a>.</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#0086b3>cd</span> ~
wget -O fira.zip <span style=color:#d14>&#34;https://fonts.google.com/download?family=Fira%20Code&#34;</span>
unzip fira.zip -d fira
</code></pre></div><p>Then, download and build ft2tf, a font conversion tool by the same author as fbpad:</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#0086b3>cd</span> ~
apt-get install libfreetype-dev
wget http://litcave.rudi.ir/ft2tf-0.9.tar.gz
tar xzf ft2tf-0.9.tar.gz
<span style=color:#0086b3>cd</span> ft2tf-0.9
make
</code></pre></div><p>Now we&rsquo;re ready to convert the font:</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>./ft2tf -h18 -w10 ~/fira/static/FiraCode-Regular.ttf:6 &gt; ~/fira/fira.tf
</code></pre></div><p>The <code>-h</code> and <code>-w</code> options specify the final glyph size in the terminal, which in turn determines the column and row count based on your screen resolution. The <code>:6</code> part after the font path specifies the size at which the TTF font is scaled before conversion. I found these values to work decently well for my Raspberry Pi&rsquo;s screen (a <a href=https://www.waveshare.com/wiki/7inch_HDMI_LCD_(C)>Waveshare 7" HDMI LCD</a>), but YMMV.</p>
<h2 id=configure-and-build-fbpad>Configure and build fbpad<a hidden class=anchor aria-hidden=true href=#configure-and-build-fbpad>#</a></h2>
<p>First, download fbpad:</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#0086b3>cd</span> ~
git clone https://github.com/aligrudi/fbpad
<span style=color:#0086b3>cd</span> fbpad
</code></pre></div><p>Then, edit <code>conf.h</code> and change these two options:</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=color:#998;font-style:italic>// ...
</span><span style=color:#998;font-style:italic></span>
<span style=color:#999;font-weight:700;font-style:italic>#define TERM      &#34;xterm-256color&#34;
</span><span style=color:#999;font-weight:700;font-style:italic>#define FR        &#34;/home/USERNAME/fira/fira.tf&#34;
</span><span style=color:#999;font-weight:700;font-style:italic></span>
<span style=color:#998;font-style:italic>// ...
</span></code></pre></div><p>Obviously, use your actual username. You can leave the rest unchanged.</p>
<p>Finally, compile fbpad:</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>make
</code></pre></div><h2 id=running-textual-in-fbpad>Running Textual in fbpad<a hidden class=anchor aria-hidden=true href=#running-textual-in-fbpad>#</a></h2>
<p>First, grab a copy of Textual (here from source, using <a href=https://python-poetry.org>Poetry</a> ‚Äì installing in a venv should work as well):</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#0086b3>cd</span> ~
git clone https://github.com/Textualize/textual.git
<span style=color:#0086b3>cd</span> textual
poetry install
</code></pre></div><p>We&rsquo;re finally ready to roll! Here is Textual color reference:</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:teal>TERMCOLOR</span><span style=color:#000;font-weight:700>=</span>truecolor ~/fbpad/fbpad poetry run textual colors
</code></pre></div><p>Note that <code>TERMCOLOR=truecolor</code> is required to have 256 colors, but it doesn&rsquo;t actually enable 24bit true color mode, which fbpad does not support.</p>
<p>Here is how it looks like in the Debian VM:</p>
<img src=/til-textual-fb-term/success-parallels.png alt="`textual colors` running with fbpad on a Debian VM" width=80% style=display:block;margin-left:auto;margin-right:auto>
<p>The Textual demo can ben run with the following command:</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:teal>TERMCOLOR</span><span style=color:#000;font-weight:700>=</span>truecolor ~/fbpad/fbpad poetry run python -m textual
</code></pre></div><img src=/til-textual-fb-term/success-parallels-demo.png alt="`python -m demo` running with fbpad on a Debian VM" width=80% style=display:block;margin-left:auto;margin-right:auto>
<p>Finally, here is a video of how it runs on the actual Raspberry Pi:</p>
<div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden>
<iframe src=https://www.youtube.com/embed/9P-qb6ux4VI style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="Textual running on a X11-less Raspberry Pi with a framebuffer terminal emulator"></iframe>
</div>
<br>
<h2 id=final-words>Final words<a hidden class=anchor aria-hidden=true href=#final-words>#</a></h2>
<p>As I mentioned before, this approach has many limitations:</p>
<ul>
<li>It&rsquo;s obviously cumbersome to setup ‚Äì compiled configuration file anyone??</li>
<li>Hardly any of the framebuffer terminal emulators are active and well maintained projects.</li>
<li>None of them have mouse support ‚Äì let alone handle a touch-screen<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>.</li>
<li>The performance is bad, without an ounce of hardware acceleration.</li>
</ul>
<p>For my purposes, I&rsquo;ll likely move on to a bare-bone X11 setup without windows manager nor Desktop environment (basically <code>startx</code> + fullscreen <code>xterm</code>), since it addresses most of these limitations. Still, it was a fun niche to dig into! ü§ì</p>
<section class=footnotes role=doc-endnotes>
<hr>
<ol>
<li id=fn:1 role=doc-endnote>
<p>Extending Textual to support a touch-screen on Linux can be done with <a href=https://python-evdev.readthedocs.io><code>python-evdev</code></a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
</ol>
</section>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://bylr.info/tags/textual/>textual</a></li>
<li><a href=https://bylr.info/tags/til/>til</a></li>
<li><a href=https://bylr.info/tags/raspberrypi/>raspberrypi</a></li>
</ul>
</footer><script src=https://utteranc.es/client.js repo=abey79/abey79.github.io issue-term=pathname label=comments theme=github-light crossorigin=anonymous async></script>
</article>
</main>
<footer class=footer>
<span>¬© 2022 Antoine Beyeler ‚Äì</span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerHTML='copy';function d(){a.innerHTML='copied!',setTimeout(()=>{a.innerHTML='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>