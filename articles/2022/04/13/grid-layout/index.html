<!doctype html><html lang=en dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>How to scale a grid on a page for uniform margins? | bylr.info</title>
<meta name=keywords content="vsketch,plotter">
<meta name=description content="The problem Several generative art algorithms, such as Truchet tiles, use a regular grid of square cells. For example, check this interactive demo from the Generative Design book or these few pieces of mine.
Now, let&rsquo;s say you want to generate an iteration of your algorithm for printing or plotting such that all margins around the grid are the same for the given paper size. You can of course adjust the number of cell rows and columns, but how should you size the cell such as to achieve uniform margins?">
<meta name=author content>
<link rel=canonical href=https://bylr.info/articles/2022/04/13/grid-layout/>
<meta name=google-site-verification content="XYZabc">
<link crossorigin=anonymous href=/assets/css/stylesheet.min.3108b1d460257d86252ac6b3389583463ded6d24c8d0cac98e612217cde39d76.css integrity="sha256-MQix1GAlfYYlKsazOJWDRj3tbSTI0MrJjmEiF83jnXY=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://bylr.info/favicon.ico>
<link rel=icon type=image/png sizes=16x16 href=https://bylr.info/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=https://bylr.info/favicon-32x32.png>
<link rel=apple-touch-icon href=https://bylr.info/apple-touch-icon.png>
<link rel=mask-icon href=https://bylr.info/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.91.2">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
</noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js onload=renderMathInElement(document.body)></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-D1H30VS7VK"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-D1H30VS7VK',{anonymize_ip:!1})}</script>
<meta property="og:title" content="How to scale a grid on a page for uniform margins?">
<meta property="og:description" content="The problem Several generative art algorithms, such as Truchet tiles, use a regular grid of square cells. For example, check this interactive demo from the Generative Design book or these few pieces of mine.
Now, let&rsquo;s say you want to generate an iteration of your algorithm for printing or plotting such that all margins around the grid are the same for the given paper size. You can of course adjust the number of cell rows and columns, but how should you size the cell such as to achieve uniform margins?">
<meta property="og:type" content="article">
<meta property="og:url" content="https://bylr.info/articles/2022/04/13/grid-layout/">
<meta property="og:image" content="https://bylr.info/grid-layout/banner.png"><meta property="article:section" content="articles">
<meta property="article:published_time" content="2022-04-13T00:00:00+00:00">
<meta property="article:modified_time" content="2022-04-13T00:00:00+00:00"><meta property="og:site_name" content="Antoine Beyeler">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://bylr.info/grid-layout/banner.png">
<meta name=twitter:title content="How to scale a grid on a page for uniform margins?">
<meta name=twitter:description content="The problem Several generative art algorithms, such as Truchet tiles, use a regular grid of square cells. For example, check this interactive demo from the Generative Design book or these few pieces of mine.
Now, let&rsquo;s say you want to generate an iteration of your algorithm for printing or plotting such that all margins around the grid are the same for the given paper size. You can of course adjust the number of cell rows and columns, but how should you size the cell such as to achieve uniform margins?">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Articles","item":"https://bylr.info/articles/"},{"@type":"ListItem","position":2,"name":"How to scale a grid on a page for uniform margins?","item":"https://bylr.info/articles/2022/04/13/grid-layout/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How to scale a grid on a page for uniform margins?","name":"How to scale a grid on a page for uniform margins?","description":"The problem Several generative art algorithms, such as Truchet tiles, use a regular grid of square cells. For example, check this interactive demo from the Generative Design book or these few pieces of mine.\nNow, let\u0026rsquo;s say you want to generate an iteration of your algorithm for printing or plotting such that all margins around the grid are the same for the given paper size. You can of course adjust the number of cell rows and columns, but how should you size the cell such as to achieve uniform margins?","keywords":["vsketch","plotter"],"articleBody":"The problem Several generative art algorithms, such as Truchet tiles, use a regular grid of square cells. For example, check this interactive demo from the Generative Design book or these few pieces of mine.\nNow, let’s say you want to generate an iteration of your algorithm for printing or plotting such that all margins around the grid are the same for the given paper size. You can of course adjust the number of cell rows and columns, but how should you size the cell such as to achieve uniform margins?\nThe image above illustrates the problem. For a given page of size $W \\times H$ and a regular grid of $N \\times M$ cells, what should be the cell size $s$ to achieve uniform margins $m$ around the grid? What is then the value of $m$?\nThe solution This is easy to solve with a bit of math. Here is the system of two equations that must be solved:\n \\[\\begin{cases} 2 \\cdot m + N \\cdot s = W \\\\ 2 \\cdot m + M \\cdot s = H \\end{cases}\\]  with all parameters ($N$, $M$, $W$, $H$) and the cell size $s$ being strictly positive.\nSolving this for $m$ and $s$ is no rocket science but Wolfram Alpha can do the job for you if your high school math is rusty!\nWe have the following solutions:\n \\[\\begin{cases} \\displaystyle s = \\frac{H - 2 m}{N}, \\quad m M, \\; WH \\end{cases}\\]  The first solution corresponds to the special case of a square page size. In this case, the grid must be square ($N=M$) and the margins may have an arbitrary value, with the cell size varying accordingly. This is not very surprising.\nThe second solution is where things become interesting. As intuition dictates, it is valid only if the grid orientation (portrait or landscape) matches the paper orientation. If so, uniform margins is achieved by choosing a cell size of $s = \\frac{H-W}{M-N}$.\nNote that the resulting margin $m$ may, depending on the parameters, be negative. In this case, the grid overflows all around the page by a constant distance. This making plotting/printing your piece inconvenient, you will have to adjust $N$ and/or $M$ to reach a positive margin value.\nThe demo I made a demonstration sketch made with vsketch. Here is how it looks:\n   This is a simplified version of the code which can be used as a starting point for your next grid-based design:\nimport itertools import vsketch class MySketch(vsketch.SketchClass): N = vsketch.Param(5, 1) M = vsketch.Param(7, 1) def draw(self, vsk: vsketch.Vsketch) - None: vsk.size(\"a4\", landscape=False, center=False) # disable auto-centering cell_size = (vsk.height - vsk.width) / (self.M - self.N) margin = (self.M * vsk.width - self.N * vsk.height) / 2 / (self.M - self.N) if cell_size  0: # account for the computed margin vsk.translate(margin, margin) # draw the grid for i, j in itertools.product(range(self.N + 1), range(self.M + 1)): vsk.point(i * cell_size, j * cell_size) else: # ERROR: N and M values must be adjusted! pass ","wordCount":"533","inLanguage":"en","image":"https://bylr.info/grid-layout/banner.png","datePublished":"2022-04-13T00:00:00Z","dateModified":"2022-04-13T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://bylr.info/articles/2022/04/13/grid-layout/"},"publisher":{"@type":"Organization","name":"bylr.info","logo":{"@type":"ImageObject","url":"https://bylr.info/favicon.ico"}}}</script>
</head>
<body id=top>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://bylr.info/ accesskey=h title="bylr.info (Alt + H)">bylr.info</a>
<span class=logo-switches>
</span>
</div>
<ul id=menu>
<li>
<a href=https://bylr.info/about/ title=about>
<span>about</span>
</a>
</li>
<li>
<a href=https://bylr.info/archives title=archives>
<span>archives</span>
</a>
</li>
<li>
<a href=https://bylr.info/tags/ title=tags>
<span>tags</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<h1 class=post-title>
How to scale a grid on a page for uniform margins?
</h1>
<div class=post-meta><span title="2022-04-13 00:00:00 +0000 UTC">April 13, 2022</span>&nbsp;|&nbsp;<a href=https://github.com/abey79/abey79.github.io/blob/main/content/articles/grid-layout.md rel="noopener noreferrer" target=_blank>Suggest Changes</a>
</div>
</header>
<figure class=entry-cover><img loading=lazy src=https://bylr.info/grid-layout/banner.png alt>
</figure>
<div class=post-content><h2 id=the-problem>The problem<a hidden class=anchor aria-hidden=true href=#the-problem>#</a></h2>
<p>Several generative art algorithms, such as <a href=https://en.wikipedia.org/wiki/Truchet_tiles>Truchet tiles</a>, use a regular grid of square cells. For example, check this <a href=http://www.generative-gestaltung.de/2/sketches/?01_P/P_2_3_6_01>interactive demo</a> from the <a href=http://www.generative-gestaltung.de/2/>Generative Design</a> book or <a href=https://github.com/abey79/vpype-explorations#covid-in-complex-module>these</a> <a href="https://twitter.com/abey79/status/1251148503176237057?s=20&t=zJlPTdagH-8hVnEKHSLOYw">few</a> <a href=https://github.com/abey79/sketches/blob/master/README.md#liquid_neon>pieces</a> of mine.</p>
<p>Now, let&rsquo;s say you want to generate an iteration of your algorithm for printing or plotting such that all margins around the grid are the same for the given paper size. You can of course adjust the number of cell rows and columns, but how should you size the cell such as to achieve uniform margins?</p>
<p>The image above illustrates the problem. For a given page of size $W \times H$ and a regular grid of $N \times M$ cells, what should be the cell size $s$ to achieve uniform margins $m$ around the grid? What is then the value of $m$?</p>
<h2 id=the-solution>The solution<a hidden class=anchor aria-hidden=true href=#the-solution>#</a></h2>
<p>This is easy to solve with a bit of math. Here is the system of two equations that must be solved:</p>
<span>
\[\begin{cases}
2 \cdot m + N \cdot s = W \\
2 \cdot m + M \cdot s = H
\end{cases}\]
</span>
<p>with all parameters ($N$, $M$, $W$, $H$) and the cell size $s$ being strictly positive.</p>
<p>Solving this for $m$ and $s$ is no rocket science but <a href=https://www.wolframalpha.com>Wolfram Alpha</a> can <a href="https://www.wolframalpha.com/input?i=solve+%7B2*m+%2B+N*s+%3D+W%2C+2*m+%2B+M*s+%3D+H%2C+W%3E0%2C+H%3E0%2C+M%3E0%2C+N%3E0%2C+s%3E0%7D+for+m+and+s+over+the+reals">do the job for you</a> if your high school math is rusty!</p>
<img src=/grid-layout/wolfram.png alt="equation solved by Wolfram Alpha" width=70% style=display:block;margin-left:auto;margin-right:auto>
<p>We have the following solutions:</p>
<span>
\[\begin{cases}
\displaystyle s = \frac{H - 2 m}{N}, \quad m &lt; \frac{H}{2} & \footnotesize M = N, \; W = H \\
\\
\displaystyle s = \frac{H-W}{M-N}, \quad m = \frac{M W - H N}{2(M - N)} & \footnotesize N&lt;M, \; W&lt;H \quad \textrm{or} \quad N>M, \; W>H
\end{cases}\]
</span>
<p>The first solution corresponds to the special case of a square page size. In this case, the grid must be square ($N=M$) and the margins may have an arbitrary value, with the cell size varying accordingly. This is not very surprising.</p>
<p>The second solution is where things become interesting. As intuition dictates, it is valid <em>only</em> if the grid orientation (portrait or landscape) matches the paper orientation. If so, uniform margins is achieved by choosing a cell size of $s = \frac{H-W}{M-N}$.</p>
<p>Note that the resulting margin $m$ may, depending on the parameters, be negative. In this case, the grid <em>overflows</em> all around the page by a constant distance. This making plotting/printing your piece inconvenient, you will have to adjust $N$ and/or $M$ to reach a positive margin value.</p>
<h2 id=the-demo>The demo<a hidden class=anchor aria-hidden=true href=#the-demo>#</a></h2>
<p>I made a <a href=https://github.com/abey79/sketches/tree/master/centred_grid>demonstration sketch</a> made with <a href=https://github.com/abey79/vsketch><em>vsketch</em></a>. Here is how it looks:</p>
<div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden>
<iframe src=https://www.youtube.com/embed/4nlGM2hcV9o style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 allowfullscreen title="YouTube Video"></iframe>
</div>
<br>
<p>This is a simplified version of the code which can be used as a starting point for your next grid-based design:</p>
<div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#000;font-weight:700>import</span> <span style=color:#555>itertools</span>
<span style=color:#000;font-weight:700>import</span> <span style=color:#555>vsketch</span>

<span style=color:#000;font-weight:700>class</span> <span style=color:#458;font-weight:700>MySketch</span>(vsketch<span style=color:#000;font-weight:700>.</span>SketchClass):
    N <span style=color:#000;font-weight:700>=</span> vsketch<span style=color:#000;font-weight:700>.</span>Param(<span style=color:#099>5</span>, <span style=color:#099>1</span>)
    M <span style=color:#000;font-weight:700>=</span> vsketch<span style=color:#000;font-weight:700>.</span>Param(<span style=color:#099>7</span>, <span style=color:#099>1</span>)

    <span style=color:#000;font-weight:700>def</span> <span style=color:#900;font-weight:700>draw</span>(<span style=color:#999>self</span>, vsk: vsketch<span style=color:#000;font-weight:700>.</span>Vsketch) <span style=color:#000;font-weight:700>-&gt;</span> <span style=color:#000;font-weight:700>None</span>:
        vsk<span style=color:#000;font-weight:700>.</span>size(<span style=color:#d14>&#34;a4&#34;</span>, landscape<span style=color:#000;font-weight:700>=</span><span style=color:#000;font-weight:700>False</span>, center<span style=color:#000;font-weight:700>=</span><span style=color:#000;font-weight:700>False</span>)   <span style=color:#998;font-style:italic># disable auto-centering</span>

        cell_size <span style=color:#000;font-weight:700>=</span> (vsk<span style=color:#000;font-weight:700>.</span>height <span style=color:#000;font-weight:700>-</span> vsk<span style=color:#000;font-weight:700>.</span>width) <span style=color:#000;font-weight:700>/</span> (<span style=color:#999>self</span><span style=color:#000;font-weight:700>.</span>M <span style=color:#000;font-weight:700>-</span> <span style=color:#999>self</span><span style=color:#000;font-weight:700>.</span>N)
        margin <span style=color:#000;font-weight:700>=</span> (<span style=color:#999>self</span><span style=color:#000;font-weight:700>.</span>M <span style=color:#000;font-weight:700>*</span> vsk<span style=color:#000;font-weight:700>.</span>width <span style=color:#000;font-weight:700>-</span> <span style=color:#999>self</span><span style=color:#000;font-weight:700>.</span>N <span style=color:#000;font-weight:700>*</span> vsk<span style=color:#000;font-weight:700>.</span>height) <span style=color:#000;font-weight:700>/</span> <span style=color:#099>2</span> <span style=color:#000;font-weight:700>/</span> (<span style=color:#999>self</span><span style=color:#000;font-weight:700>.</span>M <span style=color:#000;font-weight:700>-</span> <span style=color:#999>self</span><span style=color:#000;font-weight:700>.</span>N)
        
        <span style=color:#000;font-weight:700>if</span> cell_size <span style=color:#000;font-weight:700>&gt;</span> <span style=color:#099>0</span>:
            <span style=color:#998;font-style:italic># account for the computed margin</span>
            vsk<span style=color:#000;font-weight:700>.</span>translate(margin, margin)
            
            <span style=color:#998;font-style:italic># draw the grid</span>
            <span style=color:#000;font-weight:700>for</span> i, j <span style=color:#000;font-weight:700>in</span> itertools<span style=color:#000;font-weight:700>.</span>product(<span style=color:#0086b3>range</span>(<span style=color:#999>self</span><span style=color:#000;font-weight:700>.</span>N <span style=color:#000;font-weight:700>+</span> <span style=color:#099>1</span>), <span style=color:#0086b3>range</span>(<span style=color:#999>self</span><span style=color:#000;font-weight:700>.</span>M <span style=color:#000;font-weight:700>+</span> <span style=color:#099>1</span>)):
                vsk<span style=color:#000;font-weight:700>.</span>point(i <span style=color:#000;font-weight:700>*</span> cell_size, j <span style=color:#000;font-weight:700>*</span> cell_size)
        <span style=color:#000;font-weight:700>else</span>:
            <span style=color:#998;font-style:italic># ERROR: N and M values must be adjusted!</span>
            <span style=color:#000;font-weight:700>pass</span>
</code></pre></div>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://bylr.info/tags/vsketch/>vsketch</a></li>
<li><a href=https://bylr.info/tags/plotter/>plotter</a></li>
</ul>
</footer><script src=https://utteranc.es/client.js repo=abey79/abey79.github.io issue-term=pathname label=comments theme=github-light crossorigin=anonymous async></script>
</article>
</main>
<footer class=footer>
<span>© 2022 Antoine Beyeler –</span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>